<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Finance Forum Welcome Page</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #121212;
      color: #ffffff;
    }

    .container {
      display: flex;
      flex-direction: row;
      padding: 20px;
      max-width: 1200px;
      margin: 0 auto;
    }

    .main-content {
      flex: 2;
      padding: 20px;
    }

    .sidebar {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 20px;
      padding: 20px;
      min-width: 350px;
      max-width: 420px;
    }

    .box {
      background-color: #1e1e1e;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.4);
      padding: 15px 20px;
    }

    .box h2 {
      font-size: 20px;
      margin-bottom: 10px;
      color: #00e676;
    }

    .trending-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .trending-list li {
      padding: 8px 0;
      border-bottom: 1px solid #2c2c2c;
    }

    .trending-list a {
      color: #fff;
      text-decoration: none;
      transition: color 0.2s ease;
    }

    .trending-list a:hover {
      color: #29b6f6;
    }

    .tradingview-widget-container {
      width: 100%;
      max-width: 100%;
      overflow: hidden;
    }

  </style>
</head>
<body>
  <div class="container">
    <div class="main-content">
      <h1>Welcome to the Finance Forum</h1>
      <p>Join discussions, read news, and share insights on stocks, crypto, and everything in between.</p>
    </div>

    <div class="sidebar">
      <!-- Trending Topics from Reddit -->
      <div class="box">
        <h2>ðŸ”¥ Trending Topics (r/stocks)</h2>
        <ul class="trending-list" id="trending-list">
          <li>Loading...</li>
        </ul>
      </div>

      <!-- TradingView Widget Full Code -->
      <div class="box">
        <div class="tradingview-widget-container">
          <div class="tradingview-widget-container__widget"></div>
          <div class="tradingview-widget-copyright">
            <a href="https://www.tradingview.com/" rel="noopener nofollow" target="_blank">
              <span class="blue-text">Track all markets on TradingView</span>
            </a>
          </div>
          <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-market-overview.js" async>
          {
            "colorTheme": "dark",
            "dateRange": "12M",
            "showChart": true,
            "locale": "en",
            "largeChartUrl": "",
            "isTransparent": false,
            "showSymbolLogo": true,
            "showFloatingTooltip": false,
            "width": "100%",
            "height": "550",
            "plotLineColorGrowing": "rgba(0, 255, 0, 1)",
            "plotLineColorFalling": "rgba(255, 0, 0, 1)",
            "gridLineColor": "rgba(42, 46, 57, 0)",
            "scaleFontColor": "rgba(219, 219, 219, 1)",
            "belowLineFillColorGrowing": "rgba(41, 98, 255, 0.12)",
            "belowLineFillColorFalling": "rgba(41, 98, 255, 0.12)",
            "belowLineFillColorGrowingBottom": "rgba(41, 98, 255, 0)",
            "belowLineFillColorFallingBottom": "rgba(41, 98, 255, 0)",
            "symbolActiveColor": "rgba(41, 98, 255, 0.12)",
            "tabs": [
              {
                "title": "Indices",
                "symbols": [
                  { "s": "FOREXCOM:SPXUSD", "d": "S&P 500 Index" },
                  { "s": "FOREXCOM:NSXUSD", "d": "US 100 Cash CFD" },
                  { "s": "FOREXCOM:DJI", "d": "Dow Jones Industrial Average Index" },
                  { "s": "INDEX:NKY", "d": "Japan 225" },
                  { "s": "INDEX:DEU40", "d": "DAX Index" },
                  { "s": "FOREXCOM:UKXGBP", "d": "FTSE 100 Index" },
                  { "s": "CRYPTOCAP:BTC.D" }
                ],
                "originalTitle": "Indices"
              },
              {
                "title": "Forex",
                "symbols": [
                  { "s": "FX:EURUSD", "d": "EUR to USD" },
                  { "s": "FX:GBPUSD", "d": "GBP to USD" },
                  { "s": "FX:USDJPY", "d": "USD to JPY" },
                  { "s": "FX:USDCHF", "d": "USD to CHF" },
                  { "s": "FX:AUDUSD", "d": "AUD to USD" },
                  { "s": "FX:USDCAD", "d": "USD to CAD" },
                  { "s": "CAPITALCOM:USDCZK" },
                  { "s": "CAPITALCOM:EURCZK" },
                  { "s": "FX_IDC:CZKEUR" },
                  { "s": "FX_IDC:CZKUSD" }
                ],
                "originalTitle": "Forex"
              },
              {
                "title": "Futures",
                "symbols": [
                  { "s": "BMFBOVESPA:ISP1!", "d": "S&P 500 Index Futures" },
                  { "s": "BMFBOVESPA:EUR1!", "d": "Euro Futures" },
                  { "s": "PYTH:WTI3!", "d": "WTI CRUDE OIL" },
                  { "s": "BMFBOVESPA:ETH1!", "d": "Hydrous ethanol" },
                  { "s": "BMFBOVESPA:CCM1!", "d": "Corn" },
                  { "s": "COMEX:GC1!" },
                  { "s": "CME:BTC1!" }
                ],
                "originalTitle": "Futures"
              },
              {
                "title": "Bonds",
                "symbols": [
                  { "s": "EUREX:FGBL1!", "d": "Euro Bund" },
                  { "s": "EUREX:FBTP1!", "d": "Euro BTP" },
                  { "s": "EUREX:FGBM1!", "d": "Euro BOBL" },
                  { "s": "TVC:CZ01" },
                  { "s": "TVC:CZ10" },
                  { "s": "TVC:CZ50" }
                ],
                "originalTitle": "Bonds"
              }
            ]
          }
          </script>
        </div>
      </div>
    </div>
  </div>

  <!-- Reddit Trending Topics Script -->
  <script>
    async function loadTrendingTopics() {
      try {
        const res = await fetch('https://www.reddit.com/r/stocks/hot.json?limit=5');
        const json = await res.json();
        const posts = json.data.children;

        const list = document.getElementById('trending-list');
        list.innerHTML = '';

        posts.forEach(post => {
          const title = post.data.title;
          const url = 'https://www.reddit.com' + post.data.permalink;

          const li = document.createElement('li');
          const a = document.createElement('a');
          a.href = url;
          a.target = '_blank';
          a.textContent = title;

          li.appendChild(a);
          list.appendChild(li);
        });
      } catch (err) {
        document.getElementById('trending-list').innerHTML = '<li>Error loading topics.</li>';
        console.error(err);
      }
    }

    // Initial load
    loadTrendingTopics();

    // Auto-refresh every 3 hours (10,800,000 milliseconds)
    setInterval(loadTrendingTopics, 10800000);
  </script>
</body>
</html>